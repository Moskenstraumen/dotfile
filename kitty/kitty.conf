# ============================================================================
# FONTS
# ============================================================================

disable_ligatures always
font_size 14
font_family family="Maple Mono NF CN"
bold_font Maple Mono NF CN Bold
italic_font Maple Mono NF CN Italic
bold_italic_font Maple Mono NF CN Bold Italic
font_features MapleMono-NF-CN-ExtraLight +cv01 +ss02 +ss04 +ss05 +zero
font_features MapleMono-NF-CN-Bold +cv01 +ss02 +ss04 +ss05 +zero
font_features MapleMono-NF-CN-Italic +cv01 +ss02 +ss04 +ss05 +zero
font_features MapleMono-NF-CN-BoldItalic +cv01 +ss02 +ss04 +ss05 +zero

# ============================================================================
# PERFORMANCE & RESPONSIVENESS
# ============================================================================

# Reduce latency (especially good for SSH)
input_delay 0
repaint_delay 2
sync_to_monitor no

# Better scrollback performance
scrollback_lines 5000
scrollback_pager_history_size 10

# Faster window resizing
resize_debounce_time 0.1

# ============================================================================
# CURSOR
# ============================================================================

cursor_shape block
cursor_blink_interval 0

# ============================================================================
# SCROLLBACK
# ============================================================================

scrollback_pager nvim -c 'lua require("rockyz.kitty_scrollback")(INPUT_LINE_NUMBER, CURSOR_LINE, CURSOR_COLUMN)' -
scrollback_fill_enlarged_window yes

# ============================================================================
# CLIPBOARD & SELECTION
# ============================================================================

# Copy to clipboard on select (like most terminals)
copy_on_select clipboard

# Strip trailing spaces when copying
strip_trailing_spaces smart

# Better paste behavior
paste_actions quote-urls-at-prompt,confirm-if-large

# ============================================================================
# MOUSE & URL HANDLING
# ============================================================================

# Mouse support
mouse_hide_wait 3.0
focus_follows_mouse yes

# URL handling
url_style curly
open_url_with default
detect_urls yes
url_prefixes file ftp ftps gemini git gopher http https irc ircs kitty mailto news sftp ssh
url_color #61afef

# ============================================================================
# BELL & NOTIFICATIONS
# ============================================================================

# Visual bell instead of beep
enable_audio_bell no
visual_bell_duration 0.1
visual_bell_color #3e4452

# Window attention on bell (useful for long SSH commands)
window_alert_on_bell yes
bell_on_tab "ðŸ””"

# ============================================================================
# WINDOW LAYOUT
# ============================================================================

remember_window_size no
initial_window_width 900
initial_window_height 600
enabled_layouts splits,stack
window_padding_width 0

# Prevent accidental closes
confirm_os_window_close 1

# ============================================================================
# TAB BAR
# ============================================================================

tab_bar_edge top
tab_bar_style separator
tab_separator ""
tab_bar_min_tabs 1
tab_title_template "{fmt.fg._5c6370}{fmt.bg.default}î‚¶{fmt.fg._abb2bf}{fmt.bg._5c6370} ({index} {tab.active_oldest_exe}) {fmt.fg._5c6370}{fmt.bg.default}î‚´ "
active_tab_title_template "{fmt.fg._baa0e8}{fmt.bg.default}î‚¶{fmt.fg.default}{fmt.bg._baa0e8} ({index} {tab.active_oldest_exe}) {tab.active_wd.replace('/Users/moskenstraumen', '~')} {fmt.fg._baa0e8}{fmt.bg.default}î‚´ "
active_tab_font_style bold

# Tab colors
active_tab_foreground #abb2bf
active_tab_background #baa0e8
inactive_tab_foreground #5c6370
inactive_tab_background #282c34
inactive_tab_font_style normal

# ============================================================================
# COLOR SCHEME
# ============================================================================

include themes/arctic.conf
background_opacity 1.0
dynamic_background_opacity no

# ============================================================================
# SHELL INTEGRATION
# ============================================================================

# Full shell integration (enables advanced features)
shell_integration enabled

# ============================================================================
# OS SPECIFIC (macOS)
# ============================================================================

macos_titlebar_color dark
macos_show_window_title_in window

# ============================================================================
# KEY BINDINGS
# ============================================================================

kitty_mod ctrl+shift
clear_all_shortcuts yes

# ----------------------------------------------------------------------------
# General
# ----------------------------------------------------------------------------

map cmd+c copy_to_clipboard
map cmd+v paste_from_clipboard
map cmd+q quit
map cmd+m minimize_macos_window
map cmd+h hide_macos_app
map cmd+, edit_config_file
map ctrl+cmd+, load_config_file
map cmd+equal change_font_size all +2.0
map cmd+minus change_font_size all -2.0
map cmd+0 change_font_size all 0
map cmd+shift+ctrl+e kitten unicode_input

# ----------------------------------------------------------------------------
# Scrolling
# ----------------------------------------------------------------------------

map kitty_mod+b scroll_page_up
map kitty_mod+f scroll_page_down
map kitty_mod+z scroll_to_prompt -1
map kitty_mod+x scroll_to_prompt 1
map kitty_mod+/ show_scrollback

# ----------------------------------------------------------------------------
# Vim key mappings
# ----------------------------------------------------------------------------

map cmd+s send_text all \e:w\r
map cmd+p send_text all :Telescope find_files\r
map cmd+shift+f send_text all :Telescope live_grep\r
map cmd+b send_text all :Neotree toggle\r

# ----------------------------------------------------------------------------
# Windows
# ----------------------------------------------------------------------------

map cmd+n new_os_window
map kitty_mod+enter launch --location=split --cwd=current
map cmd+w close_window
map kitty_mod+o close_other_windows_in_tab
map kitty_mod+- launch --location=hsplit --cwd=current
map kitty_mod+\ launch --location=vsplit --cwd=current
map kitty_mod+k neighboring_window up
map kitty_mod+j neighboring_window down
map kitty_mod+h neighboring_window left
map kitty_mod+l neighboring_window right
map kitty_mod+p nth_window -1
map kitty_mod+r start_resizing_window
map kitty_mod+0 reset_window_sizes
map ctrl+9 focus_visible_window
map ctrl+0 swap_with_window

# ----------------------------------------------------------------------------
# Tabs
# ----------------------------------------------------------------------------

map cmd+t launch --type=tab --cwd=current
map cmd+shift+t new_tab
map kitty_mod+w close_tab
map kitty_mod+] next_tab
map kitty_mod+[ previous_tab
map kitty_mod+, move_tab_backward
map kitty_mod+. move_tab_forward
map kitty_mod+n set_tab_title
map cmd+1 goto_tab 1
map cmd+2 goto_tab 2
map cmd+3 goto_tab 3
map cmd+4 goto_tab 4
map cmd+5 goto_tab 5
map cmd+6 goto_tab 6
map cmd+7 goto_tab 7
map cmd+8 goto_tab 8
map cmd+9 goto_tab 9

# ----------------------------------------------------------------------------
# Hints Kitten (Quick Selection)
# ----------------------------------------------------------------------------

# Open URLs
map kitty_mod+u open_url_with_hints
map kitty_mod+e kitten hints --type url

# Select and copy URLs
map kitty_mod+y kitten hints --type url --program @

# Select paths
map kitty_mod+shift+e kitten hints --type path --program @

# Select hashes
map kitty_mod+shift+h kitten hints --type hash --program @

# Select line numbers
map kitty_mod+shift+n kitten hints --type linenum

# Select words
map kitty_mod+shift+w kitten hints --type word --program @

# ----------------------------------------------------------------------------
# Misc Key Mappings
# ----------------------------------------------------------------------------

map shift+enter send_text all \x1b[13;2u
map ctrl+enter send_text all \x1b[13;5u
map ctrl+1 send_text all \x1b[27;5;49~
map ctrl+2 send_text all \x1b[27;5;50~
map ctrl+3 send_text all \x1b[27;5;51~
map ctrl+4 send_text all \x1b[27;5;52~
map ctrl+5 send_text all \x1b[27;5;53~
map ctrl+6 send_text all \x1b[27;5;54~
map ctrl+7 send_text all \x1b[27;5;55~
map ctrl+8 send_text all \x1b[27;5;56~
map ctrl+9 send_text all \x1b[27;5;57~
map ctrl+0 send_text all \x1b[27;5;58~
map ctrl+/ send_text all \x1f

# ============================================================================
# THEME (managed by kitty themes kitten)
# ============================================================================

# BEGIN_KITTY_THEME
# Catppuccin-Mocha
include current-theme.conf
# END_KITTY_THEME
